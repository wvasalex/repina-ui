<div
  *ngFor="let block of $visible(blocks); let index = index"
  [attr.rel]="typeKey + '_' + index"
  [attr.class]="typeKey + ' content-item'"
>
  <ng-container [ngSwitch]="block[typeKey]">
    <r-article-header
      *ngSwitchCase="'article-header'"
      [props]="block.props"
      [editor]="editor"
    ></r-article-header>

    <r-article-part
      *ngSwitchCase="'article-part'"
      [props]="block.props"
      [elements]="block.content_elements"
      [editor]="editor"
    ></r-article-part>

    <r-article-text
      *ngSwitchCase="'article-text'"
      [props]="block.props"
      [editor]="editor"
    ></r-article-text>

    <r-article-image
      *ngSwitchCase="'article-image'"
      [props]="block.props"
      [editor]="editor"
    ></r-article-image>

    <r-article-quote
      *ngSwitchCase="'article-quote'"
      [props]="block.props"
      [editor]="editor"
    ></r-article-quote>

    <r-article-author
      *ngSwitchCase="'article-author'"
      [props]="block.props"
      [editor]="editor"
    ></r-article-author>
  </ng-container>

  <div
    *ngIf="editor"
    class="controls row"
  >
    <r-icon-button
      (click)="$addBlock(block, 0)"
      [size]="18"
      icon="down-arrow"
      class="block-control row revert"
    > + </r-icon-button>

    <r-icon-button
      (click)="$addBlock(block, 1)"
      [size]="18"
      icon="down-arrow"
      class="block-control row ml-1"
    > + </r-icon-button>

    <r-icon-button
      (click)="$swapElements(block)"
      [size]="18"
      icon="repeat"
      class="block-control ml-3"
    ></r-icon-button>

    <r-icon-button
      (click)="$move(block, 1)"
      [size]="18"
      icon="down-arrow"
      class="block-control ml-1"
    ></r-icon-button>

    <r-icon-button
      (click)="$move(block, -1)"
      [size]="18"
      icon="down-arrow"
      class="block-control revert"
    ></r-icon-button>

    <r-icon-button
      (click)="$remove(block)"
      [size]="18"
      icon="close"
      class="ml-3"
    ></r-icon-button>
  </div>
</div>
